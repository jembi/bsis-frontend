<div class="col-sm-3 col-md-2" ng-include="'views/inventory/sidebar.html'"></div>
<div class="col-sm-9 col-md-10 main">
  <span class="h3 page-header">Manage Return</span>

  <span class="h4" style="float:right; margin-top: 5px; padding-right: 15px; display:inline;">
    <span has-permission="{{permissions.EDIT_RETURN_FORM}}" ng-if="returnForm.permissions.canEdit" ng-hide="displayConfirmReturn">
      <em>
        <button class="btn btn-link" ng-click="edit()">Edit</button>
      </em>
    </span>
    <span style="margin-left: 20px; margin-top: -15px; float:right" ng-hide="displayConfirmReturn">
      <span has-permission="{{permissions.ISSUE_COMPONENT}}" ng-if="returnForm.permissions.canReturn">
        <button class="btn btn-primary" ng-click="confirmReturn(true)">Return to Stock</button>
      </span>
      <span has-permission="{{permissions.ISSUE_COMPONENT}}" ng-if="returnForm.status === 'RETURNED'">
        <button class="btn btn-primary" ng-click="discardStock()">Discard Stock</button>
      </span>
      <span has-permission="{{permissions.ISSUE_COMPONENT}}" ng-if="returnForm.status === 'RETURNED'">
        <button class="btn btn-primary" ng-click="exportReturnNote()">Print Return Note</button>
      </span>
    </span>
    <span ng-show="displayConfirmReturn">
      <em>
        <button class="btn btn-link text-muted" ng-click="return()">Return to Stock</button>
        <button class="btn btn-link text-muted" ng-click="confirmReturn(false)">Cancel</button>
      </em>
    </span>
  </span>

  <hr style="clear:right;"/>
  
  <section>
    <span class="text-muted">Return Date:</span> {{returnForm.returnDate | bsisDate}}
    <span class="text-muted">Returned From:</span> {{returnForm.returnedFrom.name}}
    <span class="text-muted">Returned To:</span> {{returnForm.returnedTo.name}}
  </section>

  <hr />

  <div class="panel panel-default">
    <div class="panel-body">

      <h4>Units Returned</h4>

      <div class="col-sm-12">
        <div id="grid" class="grid" ui-grid="gridOptions" ui-grid-pagination ui-grid-exporter></div>
      </div>

    </div>
  </div>

</div>
